RewriteEngine On
Options -Indexes

# Handle requests to root (/) - redirect to public
RewriteRule ^/?$ public/index.php [QSA,L]

# Let requests already targeting /public pass through unchanged
RewriteRule ^public/ - [L]

# Serve existing files as-is
RewriteCond %{REQUEST_FILENAME} -f
RewriteRule ^ - [L]

# Serve existing directories as-is (except root)
RewriteCond %{REQUEST_FILENAME} -d
RewriteCond %{REQUEST_URI} !^/?$
RewriteRule ^ - [L]

# Map common static paths to /public (so /Stampee/assets/... works)
RewriteRule ^(assets|uploads|favicon\.ico|robots\.txt)(/.*)?$ public/$1$2 [L]

# Front controller: everything else goes to /public/index.php
RewriteRule ^(.*)$ public/index.php [QSA,L]